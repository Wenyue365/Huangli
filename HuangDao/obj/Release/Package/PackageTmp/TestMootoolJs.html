<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <script src="jslib/mootools-core-1.4.5.js"></script>
    <title></title>
</head>
<body>
    <div id="divOutput"></div>
    <input type="button" value="Test Mootools JS" onclick="onclick_Go()"/>
    <input type="button" value="getSinaHlInfo" onclick="onclick_Go_getSinaHlInfo()" />

    <script type="text/javascript">
        function onclick_Go(){
            var request = new Request({
                url: "/HuangdaoWS.asmx/getWordAbstract",
                method: "post",
                data: JSON.encode({ word: "祭祀" }),
                headers: { "Content-Type": "application/json; charset=utf8" },
                onSuccess: function (responseText) {
                    var obj = JSON.decode(responseText);
                    $("divOutput").set("text", obj.d);
                },
                onFailure: function () {
                    $("divOutput").set("text", "request error");
                },
                onComplete: function () {
                    $("divOutput").set("text", "end request");
                }
            });

            request.send();

        }

        function onclick_Go_getSinaHlInfo() {
            getSinaHlInfo("2014", "3", "16");
        }

        function getSinaHlInfo(y, m, d) {
            var baseUrl = location.href;
            var i = baseUrl.lastIndexOf("/");
            baseUrl = baseUrl.substr(0, i);
            baseUrl = baseUrl + "/HuangdaoWS.asmx/getSinaHlInfo";

            var onSuccess_Handler = function (responseText) {
                var obj = JSON.decode(responseText);
                // $("lbDetail").set("text", obj.d);
            }

            var onFailure_Handler = function () {
                // $("lbDetail").set("text", "request error");
            }

            var onComplete_Handler = function () {
                // $("lbDetail").set("text", "end request");
            }

            var request = new Request({
                url: baseUrl,
                method: "post",
                data: JSON.encode({ year: y, month: m, day: d }),
                headers: { "Content-Type": "application/json; charset=utf8" },
                onSuccess: onSuccess_Handler,
                onFailure: onFailure_Handler,
                onComplete: onComplete_Handler
            });

            request.send();
        }
    </script>
</body>

</html>
